---
layout: post
title: 使用 myActiviti 设计流程图
description: 本章中我们以一个有实际意义的可流转的流程图，来向您介绍工作流最基本的元素。
category: 工作流
date: 2017-12-05
list_number: false
---

## [设计一个可流转的流程](#设计一个可流转的流程图)
我们设想一个公司项目立项的场景：公司内部有 3 个院：A 分院、B 分院和总院；立项起草人在起草好内容后要选择这 3 个大部门之一进行发送；每个院的 TMO（科技管理办公室）首先收到立项请求，TMO 经过审核后可以“同意”继续立项或者“不同意”返回起草人；TMO 同意后会发给本院的财务部，财务部经过审核后可以“同意”立项完成或者“不同意”返回起草人；起草人收到被返回的请求后可以进行结束。

我们简单分析一下这个流程，可知除开始和结束外共需要 7 个环节：起草人、A 分院 TMO、A 分院财务部、B 分院 TMO、B 分院财务部、总院 TMO、总院财务部。同时还需要做 7 次条件判断：起草人环节需要判断是发给哪个院还是直接结束、各院 TMO 需判断同意与否（× 3）、各院财务部需判断同意与否（× 3）。而这 7 次判断涉及到的变量有：`endApply`（起草人是否结束申请）、`nextOU`（起草人发送至哪个院）、`ATmoAgree`(A 分院 tmo 是否同意）、`BTmoAgree`（B 分院 tmo 是否同意）、`TmoAgree`（总院 tmo 是否同意）、`AFinanceAgree`（分院 A 财务部是否同意）、`BFinanceAgree`（分院 B 财务部是否同意）、`FinanceAgree`（总院财务部是否同意）。

将以上信息梳理好后，我们可以建一个名为“myProcess2”的流程图，然后画成如下所示：

{% asset_img 20171215143025604.png %}

这张流程图包含的元素有 `开始事件-普通开始事件`、`任务-用户任务`、`结束事件-普通结束事件`、`网关-互斥网关`、`序列流`，我们还将一条序列流的 `元素名称` 命名为“结束申请”并设为默认序列流。关于这张图的详细画法我们下面会详细介绍。

## [环节参与者、监听器](#环节参与者、监听器)

## [流程变量、排它网关](#流程变量、排它网关)

## [以关联业务方式启动流程](#以关联业务方式启动流程)

## [总结](#总结)